{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cfg19\\\\OneDrive\\\\Desktop\\\\SDHacks-2021\\\\front-end\\\\src\\\\components\\\\InputForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { Component, useEffect } from 'react';\nimport FileBase from 'react-file-base64';\nimport '../styling/InputForm.css';\nimport firebase from \"../Firebase\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst InputForm = () => {\n  _s();\n\n  const [picture, setPicture] = React.useState(\"\");\n  const [pictureSubmitted, setPictureSubmitted] = React.useState(false);\n  const storage = firebase.storage();\n\n  const handleFileUpload = async e => {\n    setPictureSubmitted(true);\n    const image = e.target.files[0];\n    console.log(\"image is \" + image.name);\n\n    if (image.name != undefined) {\n      console.log(storage);\n      const uploadTask = storage.ref(`images/${image.name}`).put(image);\n      uploadTask.on(\"state_changed\", snapshot => {\n        // progress function ...\n        const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100); //this.setState({ progress });\n      }, error => {\n        // Error function ...\n        console.log(error);\n      }, () => {\n        // complete function ...\n        storage.ref(\"images\").child(image.name).getDownloadURL().then(url => {\n          setPicture({\n            url\n          });\n        });\n      });\n    }\n\n    try {\n      const test = await axios.post(\"http://localhost:5000/machine_learning\", {\n        'url': picture\n      });\n      console.log(test.data);\n    } catch (error) {\n      console.log(error.message);\n      console.log(\"in error\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"UploadSection\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      action: \"#\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"InputWrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"UploadNewPhotoButton\",\n          for: \"photo-upload\",\n          children: [\" Upload Homework\", /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"FileChooser\",\n            type: \"file\",\n            id: \"photo-upload\",\n            onChange: handleFileUpload,\n            accept: \"image/*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(FileBase, {\n            type: \"file\",\n            multiple: false,\n            onDone: ({\n              base64\n            }) => console.log(base64)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n};\n\n_s(InputForm, \"NA3DiqLlKnLHQ95bWwWg1k9+Mu8=\");\n\n_c = InputForm;\nexport default InputForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"InputForm\");","map":{"version":3,"sources":["C:/Users/cfg19/OneDrive/Desktop/SDHacks-2021/front-end/src/components/InputForm.js"],"names":["React","Component","useEffect","FileBase","firebase","axios","InputForm","picture","setPicture","useState","pictureSubmitted","setPictureSubmitted","storage","handleFileUpload","e","image","target","files","console","log","name","undefined","uploadTask","ref","put","on","snapshot","progress","Math","round","bytesTransferred","totalBytes","error","child","getDownloadURL","then","url","test","post","data","message","base64"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,SAA1B,QAA0C,OAA1C;AACA,OAAOC,QAAP,MAAqB,mBAArB;AACA,OAAO,0BAAP;AACA,OAAOC,QAAP,MAAqB,aAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAEA,MAAMC,SAAS,GAAG,MAAM;AAAA;;AAEpB,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBR,KAAK,CAACS,QAAN,CAAe,EAAf,CAA9B;AACA,QAAM,CAACC,gBAAD,EAAmBC,mBAAnB,IAA0CX,KAAK,CAACS,QAAN,CAAe,KAAf,CAAhD;AACA,QAAMG,OAAO,GAAGR,QAAQ,CAACQ,OAAT,EAAhB;;AAGA,QAAMC,gBAAgB,GAAG,MAAOC,CAAP,IAAa;AAClCH,IAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACA,UAAMI,KAAK,GAAGD,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CAAd;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAcJ,KAAK,CAACK,IAAhC;;AACA,QAAIL,KAAK,CAACK,IAAN,IAAcC,SAAlB,EAA6B;AACzBH,MAAAA,OAAO,CAACC,GAAR,CAAYP,OAAZ;AACA,YAAMU,UAAU,GAAGV,OAAO,CAACW,GAAR,CAAa,UAASR,KAAK,CAACK,IAAK,EAAjC,EAAoCI,GAApC,CAAwCT,KAAxC,CAAnB;AACAO,MAAAA,UAAU,CAACG,EAAX,CACI,eADJ,EAEIC,QAAQ,IAAI;AACV;AACA,cAAMC,QAAQ,GAAGC,IAAI,CAACC,KAAL,CACdH,QAAQ,CAACI,gBAAT,GAA4BJ,QAAQ,CAACK,UAAtC,GAAoD,GADrC,CAAjB,CAFU,CAKV;AACD,OARL,EASIC,KAAK,IAAI;AACP;AACAd,QAAAA,OAAO,CAACC,GAAR,CAAYa,KAAZ;AACD,OAZL,EAaI,MAAM;AACJ;AACApB,QAAAA,OAAO,CACJW,GADH,CACO,QADP,EAEGU,KAFH,CAESlB,KAAK,CAACK,IAFf,EAGGc,cAHH,GAIGC,IAJH,CAIQC,GAAG,IAAI;AACX5B,UAAAA,UAAU,CAAC;AAAE4B,YAAAA;AAAF,WAAD,CAAV;AACD,SANH;AAOD,OAtBL;AAwBH;;AAED,QAAI;AACA,YAAMC,IAAI,GAAG,MAAMhC,KAAK,CAACiC,IAAN,CAAW,wCAAX,EAAqD;AAAC,eAAO/B;AAAR,OAArD,CAAnB;AACAW,MAAAA,OAAO,CAACC,GAAR,CAAYkB,IAAI,CAACE,IAAjB;AACH,KAHD,CAGE,OAAOP,KAAP,EAAc;AACZd,MAAAA,OAAO,CAACC,GAAR,CAAYa,KAAK,CAACQ,OAAlB;AACAtB,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACH;AACJ,GAxCD;;AA4CA,sBACI;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA,2BACI;AAAM,MAAA,MAAM,EAAC,GAAb;AAAA,6BACI;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA,gCACI;AAAO,UAAA,SAAS,EAAC,sBAAjB;AAAwC,UAAA,GAAG,EAAC,cAA5C;AAAA,sDACI;AAAO,YAAA,SAAS,EAAC,aAAjB;AAA+B,YAAA,IAAI,EAAC,MAApC;AAA2C,YAAA,EAAE,EAAC,cAA9C;AAA6D,YAAA,QAAQ,EAAEN,gBAAvE;AAAyF,YAAA,MAAM,EAAC;AAAhG;AAAA;AAAA;AAAA;AAAA,kBADJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAII;AAAA,iCAEA,QAAC,QAAD;AAAU,YAAA,IAAI,EAAC,MAAf;AAAsB,YAAA,QAAQ,EAAE,KAAhC;AAAuC,YAAA,MAAM,EAAE,CAAC;AAAE4B,cAAAA;AAAF,aAAD,KAAgBvB,OAAO,CAACC,GAAR,CAAYsB,MAAZ;AAA/D;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA,gBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAiBH,CApED;;GAAMnC,S;;KAAAA,S;AAsEN,eAAeA,SAAf","sourcesContent":["import React, {Component, useEffect} from 'react';\r\nimport FileBase from 'react-file-base64';\r\nimport '../styling/InputForm.css';\r\nimport firebase from \"../Firebase\"\r\nimport axios from 'axios';\r\n\r\nconst InputForm = () => {\r\n\r\n    const [picture, setPicture] = React.useState(\"\");\r\n    const [pictureSubmitted, setPictureSubmitted] = React.useState(false);\r\n    const storage = firebase.storage();\r\n\r\n\r\n    const handleFileUpload = async (e) => {\r\n        setPictureSubmitted(true);\r\n        const image = e.target.files[0];\r\n        console.log(\"image is \" + image.name);\r\n        if (image.name != undefined) {\r\n            console.log(storage);\r\n            const uploadTask = storage.ref(`images/${image.name}`).put(image);\r\n            uploadTask.on( \r\n                \"state_changed\",\r\n                snapshot => {\r\n                  // progress function ...\r\n                  const progress = Math.round(\r\n                    (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n                  );\r\n                  //this.setState({ progress });\r\n                },\r\n                error => {\r\n                  // Error function ...\r\n                  console.log(error);\r\n                },\r\n                () => {\r\n                  // complete function ...\r\n                  storage\r\n                    .ref(\"images\")\r\n                    .child(image.name)\r\n                    .getDownloadURL()\r\n                    .then(url => {\r\n                      setPicture({ url });\r\n                    });\r\n                }\r\n              );\r\n        }\r\n        \r\n        try {\r\n            const test = await axios.post(\"http://localhost:5000/machine_learning\", {'url': picture});\r\n            console.log(test.data);\r\n        } catch (error) {\r\n            console.log(error.message);\r\n            console.log(\"in error\")\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    return (\r\n        <div className=\"UploadSection\">\r\n            <form action=\"#\">\r\n                <div className=\"InputWrapper\">\r\n                    <label className=\"UploadNewPhotoButton\" for=\"photo-upload\"> Upload Homework \r\n                        <input className=\"FileChooser\" type='file' id='photo-upload' onChange={handleFileUpload} accept='image/*' />\r\n                    </label>\r\n                    <div>\r\n                        \r\n                    <FileBase type=\"file\" multiple={false} onDone={({ base64 }) => console.log(base64)} />\r\n                    </div>\r\n\r\n                    {/* {pictureSubmitted && <button className=\"ConfirmSubmit\" onClick={confirmPhotoUpload}>Submit</button>} */}\r\n                </div>\r\n            </form>\r\n        </div>\r\n     ); \r\n}\r\n\r\nexport default InputForm;"]},"metadata":{},"sourceType":"module"}